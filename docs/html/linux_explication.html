
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Linux Explication &#8212; CBC Linux Tutorial 1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="CBC Linux Tutorial Presentation Slides" href="slides.html" /> 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114680408-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114680408-6');
</script>

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="linux-explication">
<h1>Linux Explication<a class="headerlink" href="#linux-explication" title="Permalink to this headline">¶</a></h1>
<p>This document constitutes a more elaborate discussion of the principles described in our Linux presentation, presented in a structure more resembling a narrative.  The code within can be copied into a terminal and directly executed.</p>
<p><strong>THIS PAGE IS A DRAFT; REVISIONS AND SCREENSHOTS WILL BE ADDED SOON</strong></p>
<p>To list all files in the current directory, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span>
</pre></div>
</div>
<div class="section" id="part-i-introduction-to-linux">
<h2>Part I: Introduction to Linux<a class="headerlink" href="#part-i-introduction-to-linux" title="Permalink to this headline">¶</a></h2>
<p>The original way to interact with a computer, dating back to the 1960s - so why use it in this day and age?</p>
<p>The command line offers greater flexibility compared to a GUI - you can choose what to do rather than being restricted by other developers’ choices</p>
<p>Command line utilities are easy to automate, allowing for more efficient data analysis and saving you from annoying busy work</p>
<p>At first, the bare-bones ‘retro’ appearance of the CLI is intimidating - eventually, though, it is faster to use than a GUI for many tasks</p>
<p>To understand how to use the CLI, it is important to learn a few simple commands that will let you navigate the system - memorizing these will make life much easier</p>
<p>These commands will be illustrated with a screenshot from Brown’s compute cluster</p>
<p>The first command to remember is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pwd</span>
</pre></div>
</div>
<p>It stands for ‘print working directory’, and does exactly that - displays the file path of the directory (folder) you’re currently inside</p>
<img alt="_images/pwd_ss.png" src="_images/pwd_ss.png" />
<p>The next command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">[aleith&#64;login002</span> <span class="pre">~]$</span> <span class="pre">ls</span>
<span class="pre">4-1</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Figure2c.eps</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">problem</span> <span class="pre">set</span> <span class="pre">1</span>
<span class="pre">5b</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">finalgenerate</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">profile_backup</span>
<span class="pre">anaconda</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">helloworld.Rout</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">qiime2-2018.2-py35-linux-conda.yml</span>
<span class="pre">batch.script</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">hist_thetahat67.fig</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">query_sim.csv</span>
<span class="pre">batch_scripts</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">hist_thetahat6.fig</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">query_sim.mat</span>
<span class="pre">bianca7.m</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">hist_thetahat7.fig</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">R</span>
<span class="pre">cbc</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">keys</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">README</span>
<span class="pre">CCVREADME</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">lib</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">refGene.txt.gz</span>
<span class="pre">class</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">linux_tutorial</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">scratch</span>
<span class="pre">class.err</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">matlab_crash_dump.15109-1</span>&#160; <span class="pre">screen_check.sh</span>
<span class="pre">class.out</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">matlab_crash_dump.20855-1</span>&#160; <span class="pre">TERMS</span>
<span class="pre">cluster.workspace.RData</span>&#160; <span class="pre">matlab_crash_dump.20855-2</span>&#160; <span class="pre">test_synapse</span>
<span class="pre">conda</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">matlab_crash_dump.24860-1</span>&#160; <span class="pre">test.txt</span>
<span class="pre">cronlog.log</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">matlab_crash_dump.7447-1</span>&#160;&#160; <span class="pre">tophat.batch</span>
<span class="pre">cron_screen_log.txt</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">modules</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">tophat.err</span>
<span class="pre">data</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">mycloud</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">tophat_out</span>
<span class="pre">Desktop</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">ncbi</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">tophat.out</span>
<span class="pre">Downloads</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">ncbi_error_report.xml</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">trichotomized.score.R</span>
<span class="pre">Figure2a.eps</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">pathdef.m</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">untitled.m</span>
<span class="pre">Figure2b.eps</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">pkgs</span>
<span class="pre">`</span></code></p>
<p>It stands for ‘list’, and also does what it sounds like: lists the contents of the current working directory.</p>
<p>When using ‘ls’, you will note that different colors are used to depict the contents of your working directory.  These vary by the version of Linux you use; the following information corresponds to Brown’s compute cluster</p>
<p>Dark blue: a directory (folder)</p>
<p>Light blue: a symbolic link (analogous to a shortcut on Windows)</p>
<p>Black: a file</p>
<p>Other colors have niche uses that you are unlikely to encounter at this stage</p>
<p>Many Linux commands have options that change their behavior, and ‘ls’ is no exception</p>
<p>These options are set using a minus (-), directly followed by the letter associated with that option</p>
<p>For example, by default, ls only shows non-hidden files.  To show all files, you would type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>Below, you can see the radically different output of ls -a relative to ls</p>
<p>Note that on Linux, hidden files and directories always begin with a ‘.’</p>
<p>The third fundamental navigation command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span>
</pre></div>
</div>
<p>This command stands for ‘change directory’ and is what allows you to actually move around.</p>
<p>Some directories can have long, complicated names, making it difficult to type them out</p>
<p>The CLI allows so-called ‘tab completion’ - when typing part of a directory’s path (or a file’s path), pressing ‘tab’ will cause the rest of the name to be automatically filled in</p>
<p>If more than one item matches what you’ve typed, it will autocomplete up to the point of ambiguity and then you will need to type more and type ‘tab’ again</p>
<p><strong>Basic File Structure Overview</strong></p>
<p>There are two fundamental ways to refer to a file or directory on Linux: a relative file path or an absolute file path</p>
<p>A relative file path is the location of a file with respect to your current working directory (and will therefore change based on where your working directory is)</p>
<p>An absolute file path, sometimes described as a ‘full file path’, is that file’s true location on the computer and is invariant</p>
<p>There are several pieces of shorthand notation that are often used in defining a relative file path
. stands for the current working directory (i.e. the output of pwd)</p>
<p>.. stands for the parent directory, i.e. the directory that contains the current working directory</p>
<p>~ (‘tilde’) stands for the current user’s (i.e. your) home directory, the location of which is dependent on the system configuration</p>
<p>The absolute file path of a file is its location with respect to the root directory</p>
<p>The root directory is the highest level directory on the computer, and is denoted by the path ‘/’</p>
<p>File paths beginning with ‘/’ are absolute paths</p>
<p>The following two paths are very different:</p>
<p>anaconda/bin/ is the ‘bin’ directory inside the ‘anaconda’ directory inside the current directory</p>
<p>/anaconda/bin/ is the ‘bin’ directory inside the ‘anaconda’ directory inside the root directory</p>
<p>To avoid ambiguity, it is generally a good idea to stick to absolute file paths whenever possible</p>
<p><strong>File Manipulation</strong></p>
<p>We will now cover the basic tenets of file manipulation using the CLI</p>
<p>First, however, we must briefly address a technical topic that is likely unfamiliar: file permissions</p>
<p>If you’ve ever had to type your administrator password on Windows or OSX to perform an operation, you’ve encountered file permissions before</p>
<p><em>File Permissions</em></p>
<p>There are three fundamental permissions: read (r), write (w), and execute (x).</p>
<p>There are also three sets of permissions: those belonging to the user (u), those belonging to the user’s group (g), and those belonging to everyone else (o) on the system</p>
<p>To view a file’s permissions on Linux, you can type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">lh</span>
</pre></div>
</div>
<p>-rw-r–r– means ‘user has read and write permission’, ‘user’s group has read permission’, and ‘everyone else has read permission’
aleith  cbc means this file is owned by user ‘aleith’ from group ‘cbc’</p>
<p>0 refers to the file’s rounded file size</p>
<p>The last-modified date is also included for each file</p>
<p>A file’s permissions can be changed by the owner using the command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="p">[</span><span class="n">permission</span> <span class="n">to</span> <span class="n">change</span><span class="p">]</span> <span class="p">[</span><span class="n">target</span><span class="p">]</span>
</pre></div>
</div>
<p>For example, user ‘aleith’ can give himself execute permission (‘u+x’ - add execute permission to user) on ‘randomfile.txt’ using the following command</p>
<p>Note that a file for which you have execute permissions will be colored green</p>
<p>Execute permission is largely irrelevant for a text file, but it is vitally important for any script that is to be run; newly-created files often do not start with execute permission even when you create them yourself</p>
<p>The command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chown</span> <span class="p">[</span><span class="n">new</span> <span class="n">owner</span><span class="p">]</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>
</pre></div>
</div>
<p>will transfer ownership of a file to the user specified as ‘new owner’</p>
<p>The command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chgrp</span> <span class="p">[</span><span class="n">new</span> <span class="n">group</span><span class="p">]</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>
</pre></div>
</div>
<p>will transfer the file to another group without changing the user.  As users can each be members of multiple groups, this command is often used to transfer a file from one of your own groups to another</p>
<p><em>Interacting with Files</em></p>
<p>To create a new directory from the command line, simply type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="p">[</span><span class="n">directory</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>This command, naturally, means ‘make directory’</p>
<p>Directories created in this manner cannot contain spaces, as the CLI will interpret any space as the end of the directory’s name</p>
<p>To move a file, one can use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mv</span> <span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="p">[</span><span class="n">destination</span><span class="p">]</span>
</pre></div>
</div>
<p>The ‘move’ command moves ‘target’ to the directory specified as ‘destination’</p>
<p>Files can be copied by typing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="p">[</span><span class="n">original</span> <span class="n">filename</span><span class="p">]</span> <span class="p">[</span><span class="n">new</span> <span class="n">filename</span><span class="p">]</span>
</pre></div>
</div>
<p>The ‘copy’ command simply duplicates a file in its entirety</p>
<p>The * character is known as the ‘wildcard’, and it is used to mean ‘anything’</p>
<p>For example,:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">*.</span><span class="n">txt</span>
</pre></div>
</div>
<p>will run ‘ls’ on every file that ends in ‘.txt’.  To illustrate this effect, a new file called ‘script.sh’ has been added to our directory</p>
<p>Here, we show two more examples.</p>
<p>First, we list any files beginning with ‘random’:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="n">random</span><span class="o">*</span>
</pre></div>
</div>
<p>Then, we list any files that start with anything, have a ‘d’ in the middle, and then end with anything:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">*</span><span class="n">d</span><span class="o">*</span>
</pre></div>
</div>
<p>To view the contents of a file, the <code class="docutils literal"><span class="pre">less</span></code> command can be used - it will display the first few lines of the file and allow you to scroll through it.  Pressing ‘q’ will close this browser</p>
<p>The <code class="docutils literal"><span class="pre">cat</span></code> command will print out the entirely of a file</p>
<p>The <code class="docutils literal"><span class="pre">echo</span></code> command prints text to the screen</p>
<p><strong>Redirecting Output</strong></p>
<p>By default, many tools (e.g. echo) will print their output to the screen</p>
<p>The CLI has operators that can change this behavior by redirecting that output</p>
<p>The <code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">[file]</span></code> operator redirects output to ‘file’, overwriting it if it already exists</p>
<p>The related <code class="docutils literal"><span class="pre">&gt;&gt;</span> <span class="pre">[file]</span></code> operator appends output to ‘file’</p>
<p>[full page screenshot]</p>
<p><strong>Downloading Files</strong></p>
<p>Linux has two primary commands for downloading files.  The simplest is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="p">[</span><span class="n">url</span><span class="p">]</span>
</pre></div>
</div>
<p>It downloads a file as-is, with the same filename, and places it in your current working directory.  The alternative is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="p">[</span><span class="n">url</span><span class="p">]</span> <span class="o">&gt;</span> <span class="p">[</span><span class="n">filepath</span><span class="p">]</span>
</pre></div>
</div>
<p>Without the ‘&gt; [filepath]’ portion of the command, the contents of the file will be printed to the screen and not saved</p>
<p>[curl page]</p>
<p>[grep page]</p>
<p>The grep command allows us to search through a file for any entries that match a specified pattern:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">grep</span> <span class="p">[</span><span class="n">pattern</span><span class="p">]</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
</pre></div>
</div>
<p>For example, we can search our (abridged) dictionary for all words containing the letter sequence ‘aar’</p>
<p>The previous example included a fairly specific pattern, ‘aar’, intentionally selected so all matches could fit on screen - but what if that weren’t the case?  How can we count the number of matches if there are hundreds of them?</p>
<p>The CLI has an operator that allows us to send the output of one function to another function (&gt; redirects to files, not other functions):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">|</span>
</pre></div>
</div>
<p>This operator is pronounced ‘pipe’</p>
<p>If we want to know how many words in our dictionary contain the letter ‘a’ anywhere, we can combine <code class="docutils literal"><span class="pre">grep</span></code> and <code class="docutils literal"><span class="pre">wc</span> <span class="pre">-l</span></code> using a pipe</p>
<p>If we tried to do so using the wrong operator, we would end up with weird behavior and a file named ‘wc’, since &gt; treats its antecedent as a file name specification</p>
<p><strong>Deleting Files</strong></p>
<p>This ‘wc’ file is not useful, merely containing “dictionary.txt” as text</p>
<p>To delete a file, we use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>The ‘remove’ command permanently deletes a file.  Linux has no ‘Trash’ feature like Windows and OSX do - rm is in fact directly analogous to the ‘Empty Trash’ option on those systems</strong></p>
<p><strong>Miscellanea</strong></p>
<p>Sometimes, it will be necessary to stop a command before it completes (e.g. upon making a typo with a wildcard and copying thousands of files instead of a few)</p>
<p>To interrupt a command, type CTRL+c (this combination is valid on both Windows and OSX - do not substitute COMMAND for CTRL on OSX or it will not work)</p>
<p>One of the most important resources for understanding Linux commands is the manual associated with each command</p>
<p>On most versions of Linux, you can access the manual for a function by typing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">function</span><span class="p">]</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>Note that this syntax will not necessarily hold for other UNIX-like operating systems such as OSX</p>
<p>The most common error encountered on a Linux system - hands down - is <code class="docutils literal"><span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></code></p>
<p>This error means that the computer does not know how to process what you’ve typed - it could be due to a simple typo, or there could be a bigger issue</p>
<p>A slapdash attempt to look at the cp manual will look like this</p>
<p>[screenshot]</p>
<p>Oftentimes, however, you have indeed typed a valid command but Linux still says ‘command not found’ - how is that possible?</p>
<p>It all comes down to how a command line-based system runs software.  Unlike a GUI-based system where every program icon is linked directly to the software, Linux works based on a list of locations to look for program files (‘binaries’) - this list is called the ‘PATH’</p>
<p>To view your PATH, you can type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>echo $PATH
</pre></div>
</div>
<p>Here, the ‘$’ basically means ‘bash variable’ - PATH is a globally-defined variable on every Linux system</p>
<p>Any binary that is somewhere other than one of the directories inside of PATH must be called by its full file path, and on some systems, that is not possible due to permissions and access control</p>
<p>The contents of $PATH can be modified by editing a certain hidden file in your home directory; however, doing so incorrectly will cause severe problems for your account and make it impossible to run even the basic commands like cd so we will not cover that topic today</p>
<p>Brown’s compute cluster has functionality that will temporarily modify your path in response to something called a <code class="docutils literal"><span class="pre">module</span> <span class="pre">load</span></code> command, which we will cover in the second half of this talk</p>
<p>Another common error is <code class="docutils literal"><span class="pre">Permission</span> <span class="pre">denied</span></code>, which occurs when you lack the permissions to perform a given operation</p>
<p>This error usually comes about when you have downloaded a file and it’s been created with weird permissions</p>
<p>To resolve this issue, simply add the requisite permission for the operation you are attempting</p>
<p>We will simulate an example of this error on the next slide</p>
<p>[ss]</p>
<p>Linux has an uncountable number of developers publishing software, and most of these packages have their own unique errors.</p>
<p>It is highly likely that you will encounter unintelligible errors in the course of your work, especially if you are using software written in older languages like Java or C</p>
<p>When encountering such an error, it is advisable to Google the entirety of the error message except for the filename and file path of your data and system</p>
<p>Numerous forums, mailing lists, and blogs discuss how to respond to (almost) any error you might encounter</p>
</div>
<div class="section" id="part-ii-brown-s-compute-cluster">
<h2>Part II: Brown’s Compute Cluster<a class="headerlink" href="#part-ii-brown-s-compute-cluster" title="Permalink to this headline">¶</a></h2>
<p>Brown has a compute cluster operated by CCV, the Center for Computation and Visualization</p>
<p>CCV offers services to researchers affiliated with Brown</p>
<p>Chief among their resources is ‘Oscar’, the compute cluster itself</p>
<p>A compute cluster is a network of computers (‘nodes’), a subset of which can be temporarily allocated to a single job as a group</p>
<p>These nodes, for all intents and purposes, become a virtual ‘supercomputer’, pooling resources for the designated task</p>
<p>Users can specify their computational needs, which determines how many nodes are allocated for that task</p>
<p>Once the task is finished, the nodes are released back into the pool and can be used by other users</p>
<p>To connect to Oscar, run the command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="nd">@ssh</span><span class="o">.</span><span class="n">ccv</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">edu</span>
</pre></div>
</div>
<p>The ‘secure shell’ command creates a sort of virtual link between your terminal and a terminal on the remote machine, meaning your terminal can interact with the remote machine as though it belonged to that machine</p>
<p>Once you type the above login command, you will be prompted for your password</p>
<p>If you plan to use Oscar to print any graphics to the screen, you must use a slightly different command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">-</span><span class="n">Y</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span><span class="nd">@ssh</span><span class="o">.</span><span class="n">ccv</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">edu</span>
</pre></div>
</div>
<p>The ‘-Y’ option will enable graphics forwarding.  It is necessary to use any application with a GUI e.g. Firefox, RStudio, or the typical Matlab environment</p>
<p>Without specifying ‘-Y’, attempts to display graphics will cause errors</p>
<p>If left idle, ssh connections will timeout</p>
<p>Attempting to type into a terminal connected to a timed-out session will yield ~10 seconds of lag, and then an error message:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">packet_write_wait</span><span class="p">:</span> <span class="n">Connection</span> <span class="n">to</span> <span class="p">[</span><span class="n">ip</span><span class="p">]</span> <span class="n">port</span> <span class="mi">22</span><span class="p">:</span> <span class="n">Broken</span> <span class="n">pipe</span>
</pre></div>
</div>
<p>Batch jobs running in the background will not be affected by this disconnection, though any interactive jobs running in the foreground (e.g. copying files) will be terminated</p>
<p>CCV also provides a VNC client to connect to Oscar</p>
<p><a class="reference external" href="https://web1.ccv.brown.edu/technologies/vnc">https://web1.ccv.brown.edu/technologies/vnc</a></p>
<p>The VNC client resembles a typical remote desktop application and can be used for graphically-focused applications with no special options</p>
<p>When logging into the VNC, you specify parameters and are stuck with them until you end that job</p>
<p>[image]</p>
<p><strong>Transferring Files</strong></p>
<p>CCV hosts a Samba tutorial that is quite long and can be found here:</p>
<p><a class="reference external" href="https://web1.ccv.brown.edu/doc/cifs">https://web1.ccv.brown.edu/doc/cifs</a></p>
<p>Samba generally transfers files faster than SFTP</p>
<p>It is, however, also more likely to go down</p>
<p><strong>Batch Jobs</strong></p>
<p>The question then becomes: how does one actually run anything?</p>
<p>To accomplish this task, the user must create a special type of script called a ‘batch script’, used for running so-called ‘batch jobs’</p>
<p>The batch script is submitted to the ‘resource manager’, a utility that allocates nodes to users</p>
<p>Oscar uses a resource manager called ‘Slurm’</p>
<p>When a batch script is submitted to Slurm, it will put it in a queue based on the computational requirements requested and the user’s job priority
The different priority levels and their attributes can be viewed here:</p>
<p><a class="reference external" href="https://web1.ccv.brown.edu/start/account">https://web1.ccv.brown.edu/start/account</a></p>
<p>and are too detailed to reproduce here</p>
<p>Once a requested job gets to the front of Slurm’s queue, it is initialized</p>
<p>This job is run in ‘batch mode’, and happens silently in the background, with no output printed to the terminal</p>
<p>Instead, the batch script is used to specify where the output that would ordinarily appear on the terminal is written to</p>
<p>This output is provisioned into two files, ‘standard out’ and ‘standard error’ (though these names are not entirely indicative - error messages sometimes go to ‘standard out’ depending on how the software is written)</p>
<p><em>Formatting</em></p>
<p>All batch scripts require a header that follows a specified format - otherwise, Slurm will be unable to allocate resources to it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash                                             The typical shebang statement</span>
<span class="c1">#SBATCH --time=144:00:00                The time to request resources for</span>
<span class="c1">#SBATCH --cpus-per-task=8               The CPUs to request</span>
<span class="c1">#SBATCH  --mem=64G                              The memory to request</span>
<span class="c1">#SBATCH -J exac                                 The name under which to list the job</span>
<span class="c1">#SBATCH -o exac.out                             The file for ‘standard out’</span>
<span class="c1">#SBATCH -e exac.err                             The file for ‘standard error’</span>
</pre></div>
</div>
<p>Other parameters can be found at the following address:</p>
<p><a class="reference external" href="https://web1.ccv.brown.edu/doc/jobs">https://web1.ccv.brown.edu/doc/jobs</a></p>
<p>To submit a batch script with the aforementioned header, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sbatch</span> <span class="p">[</span><span class="n">script</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>You will receive a message stating that your job has been submitted.  To monitor its status, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myq</span>
</pre></div>
</div>
<p>The ‘my queue’ command shows any pending or running jobs associated with your own user account.  It is useful to check if a job has failed - if you submit an alignment you expect to take days, and after 30 seconds no job is running, it broke</p>
<p><em>Modules</em></p>
<p>The method for using software is, on the surface, different from that found on a local computer</p>
<p>To use a given tool, you must first ‘load’ that tool as a ‘module’ as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="p">[</span><span class="n">software</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>e.g. <code class="docutils literal"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">samtools</span></code></p>
<p>In truth, though, this command just temporarily prepends that software’s location to the beginning of your PATH (try viewing your PATH before and after loading!)</p>
<p>To see a list of all software available on Oscar, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">avail</span>
</pre></div>
</div>
<p>To see all of the modules currently loaded, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="nb">list</span>
</pre></div>
</div>
<p>To unload a loaded module, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">unload</span> <span class="p">[</span><span class="n">software</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>The terminal you see when first sshing into Oscar is running on a ‘login node’, a shared machine with low capabilities</p>
<p>Computationally-intensive jobs run on the login node will immediately die</p>
<p>It is possible, however, to access a node that works like a fully-capable terminal</p>
<p>To access such a node, type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">interact</span>
</pre></div>
</div>
<p>An example of an interact command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">interact</span> <span class="o">-</span><span class="n">n</span> <span class="mi">20</span> <span class="o">-</span><span class="n">t</span> <span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">-</span><span class="n">m</span> <span class="mi">10</span><span class="n">g</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">-n</span></code> refers to the number of cores (20)
<code class="docutils literal"><span class="pre">-t</span></code> refers to the time the session will last (1 hour)
<code class="docutils literal"><span class="pre">-m</span></code> refers to the memory per node (10 GB)</p>
<p>The full list of options can be found at the following link:</p>
<p><a class="reference external" href="https://web1.ccv.brown.edu/doc/jobs">https://web1.ccv.brown.edu/doc/jobs</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">CBC Linux Tutorial</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://compbiocore.github.io/cbc-workshops/">CBC Workshop index</a></li>
<li class="toctree-l1"><a class="reference internal" href="slides.html">CBC Linux Tutorial Presentation Slides</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Linux Explication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#part-i-introduction-to-linux">Part I: Introduction to Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-ii-brown-s-compute-cluster">Part II: Brown’s Compute Cluster</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="slides.html" title="previous chapter">CBC Linux Tutorial Presentation Slides</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Andrew Leith.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/linux_explication.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>